#!/usr/bin/python
import argparse
import os

import jinja2

from run_tools.build_website import BuildWebsite


def run_task(task):
    for dep_task in task.get_dependencies():
        run_task(dep_task)
    task.run()


if __name__ == '__main__':
    root_dir = os.path.dirname(os.path.realpath(__file__))
    build_dir = os.path.join(root_dir, '_build')
    static_dir = os.path.join(root_dir, 'static')
    photos_dir = os.path.join(root_dir, 'photos')
    template_dir = os.path.join(root_dir, 'templates')

    templateLoader = jinja2.FileSystemLoader(searchpath=template_dir)
    template_env = jinja2.Environment(loader=templateLoader)

    run_task(BuildWebsite(static_dir, photos_dir, build_dir, template_env))

